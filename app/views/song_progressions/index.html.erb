<%= tag.div id: "song-progressions" do %>
    <%= tag.div do %>
        <%= render "song_progressions/song_shifter", song: @song %>
        <%= render "song_progressions/progression_template_picker", progression_templates: @song.progression_templates.distinct, song: @song %>
        <%= render "song_progressions/current_progression_templates", progression_templates: @song.song_progressions, song: @song %>
        <%= tag.div @song.lyrics %>
        <%= render "song_progressions/new_progression_templates", progression_templates: [], song: @song %>

        <%# if there are more than 4 progression_templates or more, add another picker at the bottom so that there's no need to scroll all the way back up to add a new song progression %>
        <% if @song.song_progressions.count >= 4 %>
            <%= render "/song_progressions/progression_template_picker", progression_templates: @song.progression_templates.distinct, song: @song %>
        <% end %>
    <% end %>
<% end %>