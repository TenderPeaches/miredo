<%= turbo_frame_tag "song-progressions" do %>
    <%= tag.div do %>
        <%= render partial: "songs/define_song_progressions/song_shifter", locals: { song: @song } %>
        <%= render partial: "songs/define_song_progressions/progression_picker", locals: { progressions: @song.progressions.distinct, song: @song } %>
        <%= render partial: "songs/define_song_progressions/current_progressions", locals: { progressions: @song.song_progressions, song: @song } %>
        <%= render partial: "songs/define_song_progressions/new_progressions", locals: { progressions: [], song: @song } %>

        <%# if there are more than 4 progressions or more, add another picker at the bottom so that there's no need to scroll all the way back up to add a new song progression %>
        <% if @song.song_progressions.count >= 4 %>
            <%= render partial: "songs/define_song_progressions/progression_picker", locals: { progressions: @song.progressions.distinct, song: @song } %>
        <% end %>
    <% end %>
<% end %>