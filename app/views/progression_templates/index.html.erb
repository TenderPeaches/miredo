<%= content_for :header do %>
    <%= render "scales/print_for_header", scale: @song.scale || Scale.default, key: @song.key || Key.default %>
<% end %>

<%= tag.section id: "progression-templates" do %>
    <%# shift from one song to the previous/next, for now by ID %>
    <%= render "progression_templates/song_shifter", song: @song %>

    <%# only show the nav if there are some templates (because if you look further down, there's another identical one that shows up after all progressions, so user doesn't need to scroll back up or down depending %>
    <% if @song.progression_templates.any? %>
        <%= render "progression_templates/nav", song: @song %>
    <% end %>

    <%# show currently instanciated ProgressionTemplates %>
    <%= render "progression_templates/current_progression_templates", progression_templates: @song.progression_templates, scale: @song.scale || Scale.default, key: @song.key || Key.default %>
    <%# show new progression_template forms %>
    <%= render "progression_templates/new_progression_templates", progression_templates: [], song: @song, scale: @song.scale || Scale.default, key: @song.key || Key.default %>

    <%= tag.section class: "flashes", id: "flashes" %>

    <%= render "progression_templates/nav", song: @song %>
<% end %>
